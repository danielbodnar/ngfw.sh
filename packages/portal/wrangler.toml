name = "ngfw-portal"
account_id = "5dae265f74e6077ad674a3d855bf9853"
compatibility_date = "2026-02-07"
compatibility_flags = ["nodejs_compat"]
upload_source_maps = true

# Build configuration for Cloudflare Workers Builds
[build]
command = "bun install && bun run build"

# Custom domains for the portal
routes = [
	{ pattern = "app.ngfw.sh", custom_domain = true },
	{ pattern = "dash.ngfw.sh", custom_domain = true }
]

[vars]
VITE_CLERK_PUBLISHABLE_KEY = "pk_test_dG91Z2gtdW5pY29ybi0yNS5jbGVyay5hY2NvdW50cy5kZXYk"

[assets]
directory = "./dist"
not_found_handling = "single-page-application"

# Observability - logs and traces for debugging
[observability]
enabled = true
head_sampling_rate = 1

[observability.logs]
enabled = true
head_sampling_rate = 1
persist = true
invocation_logs = true

[observability.traces]
enabled = true
persist = true
head_sampling_rate = 1

# Note: VITE_CLERK_PUBLISHABLE_KEY is set at build time via .dev.vars
# For production, set via: VITE_CLERK_PUBLISHABLE_KEY=pk_live_... bun run build
